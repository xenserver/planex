.PHONY: default
default: rpms
DIST?=.el7.centos
PINSDIR ?= PINS
SPECS = $(wildcard $(PINSDIR)/*.spec SPECS/*.spec)
LINKS = $(wildcard $(PINSDIR)/*.pin SPECS/*.lnk)
MOCK_CONFIGDIR ?= mock
RPM_EXTRA_DEFINES=--define "_sourcedir %_topdir/SOURCES/%name"
MOCK_EXTRA_FLAGS ?= --loopback-config-extra="exclude = *-release"
# Start generated by planex-init
include $(shell planex-init --rules)
# End generated by planex-init

$(MOCK_CONFIGDIR)/$(MOCK_ROOT).cfg:
	mkdir -p $(@D)
	planex-create-mock-config --configdir /etc/mock --yum-config_opt debuglevel=0 --config_opt use_nspawn=False --root $(MOCK_ROOT) --enablerepo '*' --disablerepo 'c7-media' $@
	cp -p /etc/mock/{logging.ini,site-defaults.cfg} $(@D)
